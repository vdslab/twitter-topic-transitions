{"version":3,"sources":["services/algorithms.js","services/scale.js","services/loadData.js","slice.js","components/Responsive.js","components/HorizontalField.js","components/ProjectionView.js","components/TimelineView.js","components/WordBubbleView.js","App.js","index.js","workers/dbscan.worker.js","workers/layout.worker.js","workers/tsne.worker.js"],"names":["dbscan","dbscanWorker","layout","layoutWorker","tsneWorker","tsne","scale","items","screenWidth","screenHeight","length","x","y","s","left","Math","min","map","r","right","max","top","width","height","optimalFontSize","word","fontFamily","fontWeight","text","document","createElementNS","textContent","setAttributeNS","svg","appendChild","body","ok","ng","iter","m","getBBox","sqrt","removeChild","getTime","item","Date","time","tweetPerHour","start","stop","stopTime","tweetCount","loadData","a","fetch","response","json","data","timeColor","d3","domain","dailyCount","row","color","topicCircleSize","topics","range","topic","r0","wordCircleSize","words","count","forEach","i","fontSize","eps","wordClusters","clusters","cluster","wordId","pos","wordColor","undefined","slice","createSlice","name","initialState","topicClusters","selectionRadius","selectedTopics","selectedWords","minWordCount","reducers","state","action","Object","assign","payload","updateSelectionRadius","selectTopics","updateMinWordCount","toggleWord","index","indexOf","Array","from","push","splice","Responsive","render","wrapperRef","useRef","useState","setWidth","setHeight","useEffect","handleResize","current","clientWidth","clientHeight","window","addEventListener","removeEventListener","style","ref","HorizontalField","label","children","className","ProjectionChart","dispatch","useDispatch","useSelector","Set","margin","contentWidth","contentHeight","xScale","cx","yScale","cy","line","timeFormat","viewBox","transform","fill","stroke","strokeWidth","opacity","d","size","has","id","transitionProperty","transitionDuration","transitionTimingFunction","onClick","actions","ProjectionView","position","disabled","type","value","onChange","event","target","bottom","TimelineChart","axisColor","barWidth","barHeightScale","nice","lineYScale","t1","t2","active","some","filter","sWords","topicId","flag","element","topicCount","transitionPropery","maxIndex","reduce","maxItem","textAnchor","dominantBaseline","x1","y1","x2","y2","ticks","TimelineView","WordBubbleChart","wordCount","globalOpacity","localOpacity","WordBubbleView","App","role","aria-label","href","preventDefault","alert","querySelector","requestFullscreen","store","configureStore","reducer","middleware","getDefaultMiddleware","immutableCheck","serializableCheck","addMethods","require","methods","module","exports","w","Worker","__webpack_public_path__"],"mappings":"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","file":"static/js/main.83796490.chunk.js","sourcesContent":["import dbscanWorker from \"../workers/dbscan.worker.js\";\nimport layoutWorker from \"../workers/layout.worker.js\";\nimport tsneWorker from \"../workers/tsne.worker.js\";\n\nexport const { dbscan } = dbscanWorker();\nexport const { layout } = layoutWorker();\nexport const { tsne } = tsneWorker();\n","export function scale(items, screenWidth, screenHeight) {\n  if (items.length === 0) {\n    return {\n      x: 0,\n      y: 0,\n      s: 1,\n    };\n  }\n  const left = Math.min(...items.map(({ x, r }) => x - r));\n  const right = Math.max(...items.map(({ x, r }) => x + r));\n  const top = Math.min(...items.map(({ y, r }) => y - r));\n  const bottom = Math.max(...items.map(({ y, r }) => y + r));\n  const width = right - left;\n  const height = bottom - top;\n  return {\n    x: left + width / 2,\n    y: top + height / 2,\n    s: Math.min(screenWidth / width, screenHeight / height),\n  };\n}\n","import * as d3 from \"d3\";\nimport { dbscan, layout } from \"./algorithms\";\n\nconst optimalFontSize = (word, r, fontFamily, fontWeight) => {\n  const text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n  text.textContent = word;\n  text.setAttributeNS(null, \"font-family\", fontFamily);\n  text.setAttributeNS(null, \"font-weight\", fontWeight);\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  svg.appendChild(text);\n  document.body.appendChild(svg);\n  let ok = 0;\n  let ng = 100;\n  for (let iter = 0; iter < 10; ++iter) {\n    let m = (ok + ng) / 2;\n    text.setAttributeNS(null, \"font-size\", m);\n    const { width, height } = text.getBBox();\n    const d = Math.sqrt(width ** 2 + height ** 2) / 2;\n    if (d <= r) {\n      ok = m;\n    } else {\n      ng = m;\n    }\n  }\n  document.body.removeChild(svg);\n  return ok;\n};\n\nconst getTime = (item) => {\n  const date = new Date(item.time);\n  return date.getTime();\n};\n\nfunction tweetPerHour(item) {\n  const start = new Date(item.time);\n  const stop = new Date(item.stopTime);\n  return (item.tweetCount * 3600000) / (stop - start);\n}\n\nexport async function loadData() {\n  const response = await fetch(\"fukushimaData.json\");\n  const data = await response.json();\n\n  const timeColor = d3\n    .scaleSequential(d3.interpolateWarm)\n    .domain(d3.extent(data.dailyCount, getTime));\n  for (const row of data.dailyCount) {\n    row.color = timeColor(getTime(row));\n  }\n\n  const topicCircleSize = d3\n    .scaleSqrt()\n    .domain(d3.extent(data.topics, tweetPerHour))\n    .range([3, 15]);\n  for (const topic of data.topics) {\n    topic.tweetPerHour = tweetPerHour(topic);\n    topic.r = 0;\n    topic.r0 = topicCircleSize(topic.tweetPerHour);\n    topic.color = timeColor(getTime(topic));\n  }\n\n  const wordCircleSize = d3\n    .scaleSqrt()\n    .domain(d3.extent(data.words, (item) => item.count))\n    .range([10, 50]);\n  data.words.forEach((word, i) => {\n    word.x *= 10;\n    word.y *= 10;\n    word.r = wordCircleSize(word.count);\n    word.fontSize = optimalFontSize(word.word, word.r, \"700\");\n  });\n\n  const eps = 20;\n  const { clusters: wordClusters } = await dbscan(\n    data.words.map(({ x, y }) => [x, y]),\n    eps,\n    2\n  );\n  wordClusters.forEach((cluster, i) => {\n    for (const wordId of cluster) {\n      data.words[wordId].cluster = i;\n    }\n  });\n\n  const pos = await layout(data.words, eps);\n  const wordColor = d3.scaleOrdinal(d3.schemePaired);\n  data.words.forEach((word, i) => {\n    const { x, y } = pos[i];\n    word.x = x;\n    word.y = y;\n    word.color =\n      word.cluster === undefined ? \"lightgray\" : wordColor(word.cluster);\n  });\n\n  data.wordClusters = wordClusters;\n  return data;\n}\n","import { createSlice } from \"@reduxjs/toolkit\";\nconst slice = createSlice({\n  name: \"app\",\n  initialState: {\n    topics: [],\n    words: [],\n    dailyCount: [],\n    topicClusters: [],\n    wordClusters: [],\n    selectionRadius: 3,\n    selectedTopics: [],\n    selectedWords: [],\n    minWordCount: 0,\n  },\n  reducers: {\n    loadData(state, action) {\n      return Object.assign({}, state, action.payload);\n    },\n    updateSelectionRadius(state, action) {\n      return Object.assign({}, state, { selectionRadius: action.payload });\n    },\n    selectTopics(state, action) {\n      return Object.assign({}, state, { selectedTopics: action.payload });\n    },\n    updateMinWordCount(state, action) {\n      return Object.assign({}, state, { minWordCount: action.payload });\n    },\n    toggleWord(state, action) {\n      const word = action.payload;\n      const index = state.selectedWords.indexOf(word);\n      const selectedWords = Array.from(state.selectedWords);\n      if (index < 0) {\n        selectedWords.push(word);\n      } else {\n        selectedWords.splice(index, 1);\n      }\n      return Object.assign({}, state, { selectedWords });\n    },\n  },\n});\n\nexport default slice;\n","import { useEffect, useRef, useState } from \"react\";\n\nexport function Responsive({ render }) {\n  const wrapperRef = useRef();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n\n  useEffect(() => {\n    function handleResize() {\n      setWidth(wrapperRef.current.clientWidth);\n      setHeight(wrapperRef.current.clientHeight);\n    }\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  return (\n    <div style={{ width: \"100%\", height: \"100%\" }} ref={wrapperRef}>\n      {render(width, height)}\n    </div>\n  );\n}\n","export function HorizontalField({ label, children }) {\n  return (\n    <div className=\"field is-horizontal\">\n      <div className=\"field-label is-normal\">\n        <label className=\"label\">{label}</label>\n      </div>\n      <div className=\"field-body\">{children}</div>\n    </div>\n  );\n}\n","import { useDispatch, useSelector } from \"react-redux\";\nimport * as d3 from \"d3\";\nimport { dbscan, scale } from \"../services\";\nimport slice from \"../slice.js\";\nimport { Responsive } from \"./Responsive.js\";\nimport { HorizontalField } from \"./HorizontalField.js\";\n\nfunction ProjectionChart({ width, height }) {\n  const dispatch = useDispatch();\n  const topics = useSelector(({ topics }) => topics);\n  const selectionRadius = useSelector(({ selectionRadius }) => selectionRadius);\n  const selectedTopics = useSelector(\n    ({ selectedTopics }) => new Set(selectedTopics)\n  );\n\n  const margin = { left: 10, right: 10, top: 10, bottom: 10 };\n  const contentWidth = width - margin.left - margin.right;\n  const contentHeight = height - margin.top - margin.bottom;\n\n  const { x, y, s } = scale(topics, contentWidth, contentHeight);\n  function xScale(cx) {\n    return (cx - x) * s;\n  }\n  function yScale(cy) {\n    return (cy - y) * s;\n  }\n  const line = d3\n    .line()\n    .x((item) => xScale(item.x))\n    .y((item) => yScale(item.y));\n  const timeFormat = d3.timeFormat(\"%Y-%m-%d %H:%M\");\n\n  return (\n    <svg viewBox={`0 0 ${width} ${height}`}>\n      <g transform={`translate(${margin.left}, ${margin.top})`}>\n        <g transform={`translate(${contentWidth / 2},${contentHeight / 2})`}>\n          <g>\n            <path\n              fill=\"none\"\n              stroke=\"lightgray\"\n              strokeWidth=\"3\"\n              opacity=\"0.5\"\n              d={line(topics)}\n            />\n          </g>\n          <g>\n            {topics.map((item, i) => {\n              return (\n                <g\n                  key={i}\n                  className=\"is-clickable\"\n                  opacity={\n                    selectedTopics.size === 0 || selectedTopics.has(item.id)\n                      ? 1\n                      : 0.1\n                  }\n                  style={{\n                    transitionProperty: \"opacity\",\n                    transitionDuration: \"1s\",\n                    transitionTimingFunction: \"ease\",\n                  }}\n                  transform={`translate(${xScale(item.x)}, ${yScale(item.y)})`}\n                  onClick={async () => {\n                    if (selectedTopics.has(item.id)) {\n                      dispatch(slice.actions.selectTopics([]));\n                      return;\n                    }\n                    const { clusters } = await dbscan(\n                      topics.map(({ x, y }) => [x, y]),\n                      selectionRadius,\n                      1\n                    );\n                    for (const cluster of clusters) {\n                      for (const id of cluster) {\n                        if (id === item.id) {\n                          dispatch(slice.actions.selectTopics(cluster));\n                          return;\n                        }\n                      }\n                    }\n                  }}\n                >\n                  <circle r={item.r0} opacity=\"0.7\" fill={item.color}>\n                    <title>\n                      {timeFormat(new Date(item.time))}-\n                      {timeFormat(new Date(item.stopTime))}\n                    </title>\n                  </circle>\n                </g>\n              );\n            })}\n          </g>\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport function ProjectionView() {\n  const dispatch = useDispatch();\n  const selectionRadius = useSelector(({ selectionRadius }) => selectionRadius);\n  return (\n    <div style={{ position: \"relative\", width: \"100%\", height: \"100%\" }}>\n      <div className=\"p-3\">\n        <HorizontalField label=\"Selection Radius\">\n          <div className=\"field has-addons\">\n            <div className=\"control\">\n              <button\n                disabled={selectionRadius <= 0}\n                className=\"button\"\n                onClick={() => {\n                  dispatch(\n                    slice.actions.updateSelectionRadius(selectionRadius - 1)\n                  );\n                }}\n              >\n                <span className=\"icon\">\n                  <i className=\"fas fa-minus\" />\n                </span>\n              </button>\n            </div>\n            <div className=\"control is-expanded\">\n              <input\n                className=\"input\"\n                type=\"number\"\n                min=\"0\"\n                value={selectionRadius}\n                onChange={(event) => {\n                  dispatch(\n                    slice.actions.updateSelectionRadius(+event.target.value)\n                  );\n                }}\n              />\n            </div>\n            <div className=\"control\">\n              <button\n                className=\"button\"\n                onClick={() => {\n                  dispatch(\n                    slice.actions.updateSelectionRadius(selectionRadius + 1)\n                  );\n                }}\n              >\n                <span className=\"icon\">\n                  <i className=\"fas fa-plus\" />\n                </span>\n              </button>\n            </div>\n          </div>\n        </HorizontalField>\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          top: \"64px\",\n          right: 0,\n          bottom: 0,\n          left: 0,\n        }}\n      >\n        <Responsive\n          render={(width, height) => (\n            <ProjectionChart width={width} height={height} />\n          )}\n        />\n      </div>\n    </div>\n  );\n}\n","import { useDispatch, useSelector } from \"react-redux\";\nimport * as d3 from \"d3\";\nimport slice from \"../slice.js\";\nimport { Responsive } from \"./Responsive.js\";\n\nfunction TimelineChart({ width, height }) {\n  const dispatch = useDispatch();\n  const topics = useSelector(({ topics }) => topics);\n  const words = useSelector(({ words }) => words);\n  const dailyCount = useSelector(({ dailyCount }) => dailyCount);\n  const selectedTopics = useSelector(({ topics, selectedTopics }) =>\n    selectedTopics.map((id) => topics[id])\n  );\n  const selectedWords = useSelector(\n    ({ selectedWords }) => new Set(selectedWords)\n  );\n  const minWordCount = useSelector(({ minWordCount }) => minWordCount);\n\n  const margin = {\n    top: 20,\n    right: 60,\n    bottom: 50,\n    left: 60,\n  };\n  const contentWidth = width - margin.left - margin.right;\n  const contentHeight = height - margin.top - margin.bottom;\n\n  const axisColor = \"#363636\";\n  const barWidth = contentWidth / dailyCount.length + 1;\n  const timeFormat = d3.timeFormat(\"%Y-%m-%d\");\n\n  const xScale = d3\n    .scaleTime()\n    .domain(d3.extent(dailyCount, (item) => new Date(item.time)))\n    .range([barWidth / 2, contentWidth - barWidth / 2]);\n  const barHeightScale = d3\n    .scaleLinear()\n    .domain([0, d3.max(dailyCount, (item) => item.tweetCount)])\n    .range([0, contentHeight])\n    .nice();\n  const lineYScale = d3\n    .scaleLinear()\n    .domain([\n      0,\n      d3.max(dailyCount, (item) => {\n        if (selectedWords.size === 0) {\n          return 100;\n        }\n        return d3.max(Array.from(selectedWords), (id) => item.words[id]);\n      }),\n    ])\n    .range([contentHeight, 0])\n    .nice();\n\n  return (\n    <svg width={width} height={height}>\n      <g transform={`translate(${margin.left},${margin.top})`}>\n        <g>\n          {dailyCount.map((item, i) => {\n            const t1 = new Date(item.time);\n            const t2 = new Date(t1.getTime() + 86400000);\n            const active =\n              selectedTopics.length === 0 ||\n              selectedTopics.some((topic) => {\n                const start = new Date(topic.time);\n                const stop = new Date(topic.stopTime);\n                return t1 <= stop && start <= t2;\n              });\n            return (\n              <g\n                key={item.time}\n                style={{\n                  transitionProperty: \"opacity\",\n                  transitionDuration: \"1s\",\n                  transitionTimingFunction: \"ease\",\n                }}\n                opacity={active ? 1 : 0.1}\n              >\n                <title>{timeFormat(t1)}</title>\n                <rect\n                  className=\"is-clickable\"\n                  x={xScale(new Date(item.time)) - barWidth / 2}\n                  y={contentHeight - barHeightScale(item.tweetCount)}\n                  width={barWidth}\n                  height={barHeightScale(item.tweetCount)}\n                  fill={item.color}\n                  onClick={() => {\n                    if (selectedTopics.length !== 0 && active) {\n                      dispatch(slice.actions.selectTopics([]));\n                    } else {\n                      dispatch(\n                        slice.actions.selectTopics(\n                          topics\n                            .filter((topic) => {\n                              const start = new Date(topic.time);\n                              const stop = new Date(topic.stopTime);\n                              return t1 <= stop && start <= t2;\n                            })\n                            .map(({ id }) => id)\n                        )\n                      );\n                    }\n                  }}\n                />\n              </g>\n            );\n          })}\n        </g>\n        <g>\n          {words.map((word) => {\n            const line = d3.line().x((item) => xScale(new Date(item.time)));\n            if (selectedWords.has(word.id)) {\n              line.y((item) => lineYScale(item.words[word.id]));\n            } else {\n              line.y(() => lineYScale(0));\n            }\n            return (\n              <g\n                key={word.id}\n                className=\"is-clickable\"\n                onClick={() => {\n                  dispatch(slice.actions.toggleWord(word.id));\n\n                  const sWords = Array.from(selectedWords);\n                  const index = sWords.indexOf(word.id);\n                  if (index < 0) {\n                    sWords.push(word.id);\n                  } else {\n                    sWords.splice(index, 1);\n                  }\n\n                  if (sWords.size === 0) {\n                    dispatch(slice.actions.selectTopics([]));\n                  } else {\n                    dispatch(\n                      slice.actions.selectTopics(\n                        topics\n                          .filter((topic) => {\n                            const topicId = topic.id;\n                            var flag = 0;\n                            sWords.forEach(function (element) {\n                              if (\n                                words[element].topicCount[topicId] <\n                                minWordCount\n                              )\n                                flag = 1;\n                            });\n                            return flag === 0;\n                          })\n                          .map(({ id }) => id)\n                      )\n                    );\n                  }\n                }}\n              >\n                <path\n                  style={{\n                    transitionPropery: \"d\",\n                    transitionDuration: \"1s\",\n                    transitionTimingFunction: \"ease\",\n                  }}\n                  d={line(dailyCount)}\n                  fill=\"none\"\n                  opacity=\"0.9\"\n                  stroke={selectedWords.has(word.id) ? word.color : \"none\"}\n                  strokeWidth=\"5\"\n                >\n                  <title>{word.word}</title>\n                </path>\n              </g>\n            );\n          })}\n        </g>\n        <g>\n          {words.map((word) => {\n            if (!selectedWords.has(word.id)) {\n              return null;\n            }\n            const maxIndex = dailyCount.reduce(\n              (x, item, i) =>\n                item.words[word.id] > dailyCount[x].words[word.id] ? i : x,\n              0\n            );\n            const maxItem = dailyCount[maxIndex];\n            return (\n              <g\n                key={word.id}\n                className=\"is-clickable\"\n                onClick={() => {\n                  dispatch(slice.actions.toggleWord(word.id));\n\n                  const sWords = Array.from(selectedWords);\n                  const index = sWords.indexOf(word.id);\n                  if (index < 0) {\n                    sWords.push(word.id);\n                  } else {\n                    sWords.splice(index, 1);\n                  }\n\n                  if (sWords.size === 0) {\n                    dispatch(slice.actions.selectTopics([]));\n                  } else {\n                    dispatch(\n                      slice.actions.selectTopics(\n                        topics\n                          .filter((topic) => {\n                            const topicId = topic.id;\n                            var flag = 0;\n                            sWords.forEach(function (element) {\n                              if (\n                                words[element].topicCount[topicId] <\n                                minWordCount\n                              )\n                                flag = 1;\n                            });\n                            return flag === 0;\n                          })\n                          .map(({ id }) => id)\n                      )\n                    );\n                  }\n                }}\n              >\n                <text\n                  x={xScale(new Date(maxItem.time))}\n                  y={lineYScale(maxItem.words[word.id])}\n                  textAnchor=\"middle\"\n                  dominantBaseline=\"text-after-edge\"\n                  fontWeight=\"700\"\n                  fontSize=\"12\"\n                  fill={axisColor}\n                >\n                  {word.word}\n                </text>\n              </g>\n            );\n          })}\n        </g>\n        <g transform={`translate(0,${contentHeight})`}>\n          <line x1=\"0\" y1=\"0\" x2={contentWidth} y2=\"0\" stroke={axisColor} />\n          <g>\n            {xScale.ticks().map((x, i) => {\n              return (\n                <g key={i} transform={`translate(${xScale(x)},0)`}>\n                  <line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"5\" stroke={axisColor} />\n                  <g transform=\"rotate(-30)\">\n                    <text\n                      x=\"-5\"\n                      textAnchor=\"end\"\n                      dominantBaseline=\"text-before-edge\"\n                      fontWeight=\"700\"\n                      fontSize=\"10\"\n                      fill={axisColor}\n                    >\n                      {timeFormat(x)}\n                    </text>\n                  </g>\n                </g>\n              );\n            })}\n          </g>\n        </g>\n        <g>\n          <text\n            transform={`translate(-50,${contentHeight / 2})rotate(-90)`}\n            textAnchor=\"middle\"\n            dominantBaseline=\"central\"\n            fontWeight=\"700\"\n            fontSize=\"16\"\n            fill={axisColor}\n          >\n            Tweet Count\n          </text>\n          <line x1=\"0\" y1={contentHeight} x2=\"0\" y2=\"0\" stroke={axisColor} />\n          <g>\n            {barHeightScale.ticks().map((y, i) => {\n              return (\n                <g\n                  key={i}\n                  transform={`translate(0,${\n                    contentHeight - barHeightScale(y)\n                  })`}\n                >\n                  <line x1=\"0\" y1=\"0\" x2=\"-5\" y2=\"0\" stroke={axisColor} />\n                  <text\n                    x=\"-7\"\n                    textAnchor=\"end\"\n                    dominantBaseline=\"central\"\n                    fontWeight=\"700\"\n                    fontSize=\"12\"\n                    fill={axisColor}\n                  >\n                    {y}\n                  </text>\n                </g>\n              );\n            })}\n          </g>\n        </g>\n        <g transform={`translate(${contentWidth},0)`}>\n          <text\n            transform={`translate(40,${contentHeight / 2})rotate(-90)`}\n            textAnchor=\"middle\"\n            dominantBaseline=\"central\"\n            fontWeight=\"700\"\n            fontSize=\"16\"\n            fill={axisColor}\n          >\n            Word Occurrence\n          </text>\n          <line x1=\"0\" y1={contentHeight} x2=\"0\" y2=\"0\" stroke={axisColor} />\n          <g>\n            {lineYScale.ticks().map((y, i) => {\n              return (\n                <g key={i} transform={`translate(0,${lineYScale(y)})`}>\n                  <line x1=\"0\" y1=\"0\" x2=\"5\" y2=\"0\" stroke={axisColor} />\n                  <text\n                    x=\"7\"\n                    textAnchor=\"start\"\n                    dominantBaseline=\"central\"\n                    fontWeight=\"700\"\n                    fontSize=\"12\"\n                    fill={axisColor}\n                  >\n                    {y}\n                  </text>\n                </g>\n              );\n            })}\n          </g>\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport function TimelineView() {\n  return (\n    <Responsive\n      render={(width, height) => (\n        <TimelineChart width={width} height={height} />\n      )}\n    />\n  );\n}\n","import { useDispatch, useSelector } from \"react-redux\";\nimport { scale } from \"../services\";\nimport slice from \"../slice\";\nimport { Responsive } from \"./Responsive.js\";\nimport { HorizontalField } from \"./HorizontalField.js\";\n\nfunction WordBubbleChart({ width, height }) {\n  const dispatch = useDispatch();\n  const topics = useSelector(({ topics }) => topics);\n  const words = useSelector(({ words }) => words);\n  const selectedTopics = useSelector(({ selectedTopics }) => selectedTopics);\n  const selectedWords = useSelector(\n    ({ selectedWords }) => new Set(selectedWords)\n  );\n  const minWordCount = useSelector(({ minWordCount }) => minWordCount);\n\n  const margin = {\n    left: 10,\n    right: 10,\n    top: 10,\n    bottom: 10,\n  };\n  const contentWidth = width - margin.left - margin.right;\n  const contentHeight = height - margin.top - margin.bottom;\n  const { x, y, s } = scale(words, contentWidth, contentHeight);\n\n  return (\n    <svg viewBox={`0 0 ${width} ${height}`}>\n      <g transform={`translate(${margin.left}, ${margin.top})`}>\n        <g transform={`translate(${contentWidth / 2},${contentHeight / 2})`}>\n          <g transform={`scale(${s})`}>\n            <g transform={`translate(${-x},${-y})`}>\n              {words.map((word) => {\n                const wordCount =\n                  selectedTopics.length === 0\n                    ? word.count\n                    : selectedTopics.reduce(\n                        (s, id) => s + word.topicCount[id],\n                        0\n                      );\n                const globalOpacity = wordCount < minWordCount ? 0 : 1;\n                const localOpacity = Math.sqrt(wordCount / word.count);\n                return (\n                  <g\n                    key={word.id}\n                    className=\"is-clickable\"\n                    opacity={globalOpacity}\n                    style={{\n                      transitionProperty: \"opacity\",\n                      transitionDuration: \"1s\",\n                      transitionTimingFunction: \"ease\",\n                    }}\n                    transform={`translate(${word.x}, ${word.y})`}\n                    onClick={() => {\n                      dispatch(slice.actions.toggleWord(word.id));\n\n                      const sWords = Array.from(selectedWords);\n                      const index = sWords.indexOf(word.id);\n                      if (index < 0) {\n                        sWords.push(word.id);\n                      } else {\n                        sWords.splice(index, 1);\n                      }\n\n                      if (sWords.size === 0) {\n                        dispatch(slice.actions.selectTopics([]));\n                      } else {\n                        dispatch(\n                          slice.actions.selectTopics(\n                            topics\n                              .filter((topic) => {\n                                const topicId = topic.id;\n                                var flag = 0;\n                                sWords.forEach(function (element) {\n                                  if (\n                                    words[element].topicCount[topicId] <\n                                    minWordCount\n                                  )\n                                    flag = 1;\n                                });\n                                return flag === 0;\n                              })\n                              .map(({ id }) => id)\n                          )\n                        );\n                      }\n                    }}\n                  >\n                    <title>{`${word.word}`}</title>\n                    <circle\n                      r={word.r}\n                      opacity={localOpacity}\n                      style={{\n                        transitionProperty: \"opacity\",\n                        transitionDuration: \"1s\",\n                        transitionTimingFunction: \"ease\",\n                      }}\n                      fill={word.color}\n                    />\n                    <circle\n                      r={word.r}\n                      fill=\"none\"\n                      stroke={selectedWords.has(word.id) ? \"#363636\" : \"none\"}\n                      strokeWidth=\"2\"\n                    />\n                    <text\n                      className=\"is-unselectable\"\n                      fontSize={word.fontSize}\n                      textAnchor=\"middle\"\n                      dominantBaseline=\"central\"\n                      fontWeight=\"700\"\n                      fill=\"#363636\"\n                    >\n                      {word.word}\n                    </text>\n                  </g>\n                );\n              })}\n            </g>\n          </g>\n        </g>\n      </g>\n    </svg>\n  );\n}\n\nexport function WordBubbleView({ words, selectedTopics }) {\n  const dispatch = useDispatch();\n  const minWordCount = useSelector(({ minWordCount }) => minWordCount);\n  return (\n    <div style={{ position: \"relative\", width: \"100%\", height: \"100%\" }}>\n      <div className=\"p-3\">\n        <HorizontalField label=\"Min Word Count\">\n          <div className=\"field has-addons\">\n            <div className=\"control\">\n              <button\n                disabled={minWordCount <= 0}\n                className=\"button\"\n                onClick={() => {\n                  dispatch(slice.actions.updateMinWordCount(minWordCount - 1));\n                }}\n              >\n                <span className=\"icon\">\n                  <i className=\"fas fa-minus\" />\n                </span>\n              </button>\n            </div>\n            <div className=\"control is-expanded\">\n              <input\n                className=\"input\"\n                type=\"number\"\n                min=\"1\"\n                value={minWordCount}\n                onChange={(event) => {\n                  dispatch(\n                    slice.actions.updateMinWordCount(+event.target.value)\n                  );\n                }}\n              />\n            </div>\n            <div className=\"control\">\n              <button\n                className=\"button\"\n                onClick={() => {\n                  dispatch(slice.actions.updateMinWordCount(minWordCount + 1));\n                }}\n              >\n                <span className=\"icon\">\n                  <i className=\"fas fa-plus\" />\n                </span>\n              </button>\n            </div>\n          </div>\n        </HorizontalField>\n      </div>\n      <div\n        style={{\n          position: \"absolute\",\n          top: \"64px\",\n          right: 0,\n          bottom: 0,\n          left: 0,\n        }}\n      >\n        <Responsive\n          render={(width, height) => (\n            <WordBubbleChart\n              words={words}\n              selectedTopics={selectedTopics}\n              width={width}\n              height={height}\n            />\n          )}\n        />\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { ProjectionView, TimelineView, WordBubbleView } from \"./components\";\nimport slice from \"./slice.js\";\nimport { loadData } from \"./services\";\n\nconst App = () => {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    (async () => {\n      const data = await loadData();\n      dispatch(slice.actions.loadData(data));\n    })();\n  }, [dispatch]);\n\n  return (\n    <>\n      <nav\n        className=\"navbar is-info\"\n        role=\"navigation\"\n        aria-label=\"main navigation\"\n      >\n        <div className=\"navbar-brand\">\n          <a className=\"navbar-item\" href=\".\">\n            <h1>Visualization of Twitter Topic Transitions</h1>\n          </a>\n        </div>\n        <div className=\"navbar-menu\">\n          <div className=\"navbar-start\">\n            <a\n              className=\"navbar-item\"\n              href=\".\"\n              onClick={(event) => {\n                event.preventDefault();\n                alert(\n                  `Demo application for viaulization of twitter topic transitions.\nRecommended display resolution: Over Full HD\nDeveloped by: https://vdslab.jp`\n                );\n              }}\n            >\n              About\n            </a>\n          </div>\n          <div className=\"navbar-end\">\n            <div className=\"navbar-item\">\n              <div className=\"buttons\">\n                <button\n                  className=\"button\"\n                  onClick={() => {\n                    dispatch(slice.actions.selectTopics([]));\n                  }}\n                >\n                  Clear Selection\n                </button>\n                <button\n                  className=\"button\"\n                  onClick={() => {\n                    document.querySelector(\"#content\").requestFullscreen();\n                  }}\n                >\n                  <span className=\"icon\">\n                    <i className=\"fas fa-expand\" />\n                  </span>\n                </button>\n                <button\n                  className=\"button\"\n                  onClick={() => {\n                    alert(\"TBD\");\n                  }}\n                >\n                  <span className=\"icon\">\n                    <i className=\"fas fa-cogs\" />\n                  </span>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </nav>\n      <main className=\"main has-background-info-light\">\n        <div className=\"main-contents\">\n          <div className=\"timeline-view p-3\">\n            <div className=\"box is-paddingless is-radiusless\">\n              <TimelineView />\n            </div>\n          </div>\n          <div className=\"projection-view p-3\">\n            <div className=\"box is-paddingless is-radiusless\">\n              <ProjectionView />\n            </div>\n          </div>\n          <div className=\"word-bubble-view p-3\">\n            <div className=\"box is-paddingless is-radiusless\">\n              <WordBubbleView />\n            </div>\n          </div>\n        </div>\n      </main>\n    </>\n  );\n};\n\nexport default App;\n","import \"bulma/css/bulma.css\";\nimport \"@fortawesome/fontawesome-free/css/all.css\";\nimport \"./styles.css\";\nimport { render } from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { configureStore } from \"@reduxjs/toolkit\";\nimport App from \"./App.js\";\nimport slice from \"./slice.js\";\n\nconst store = configureStore({\n  reducer: slice.reducer,\n  middleware(getDefaultMiddleware) {\n    return getDefaultMiddleware({\n      immutableCheck: false,\n      serializableCheck: false,\n    });\n  },\n});\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.querySelector(\"#content\")\n);\n","\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"dbscan\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"0122b5b0cedbbdb80a18.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"layout\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"2fe890b6e5a27f6c73ad.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t","\n\t\t\t\tvar addMethods = require(\"../../node_modules/workerize-loader/dist/rpc-wrapper.js\")\n\t\t\t\tvar methods = [\"tsne\"]\n\t\t\t\tmodule.exports = function() {\n\t\t\t\t\tvar w = new Worker(__webpack_public_path__ + \"9398b91f8e7660e9636f.worker.js\", { name: \"[hash].worker.js\" })\n\t\t\t\t\taddMethods(w, methods)\n\t\t\t\t\t\n\t\t\t\t\treturn w\n\t\t\t\t}\n\t\t\t"],"sourceRoot":""}