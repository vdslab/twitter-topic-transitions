!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/twitter-topic-transitions/",i(i.s=2)}([function(t,e,i){function s(t,e,i){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,i)}s.prototype.insert=function(t,e){for(var i=this._queue.length,s=i;s--;){var r=this._priorities[s];"desc"===this._sorting?e>r&&(i=s):e<r&&(i=s)}this._insertAt(t,e,i)},s.prototype.remove=function(t){for(var e=this._queue.length;e--;){if(t===this._queue[e]){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},s.prototype.forEach=function(t){this._queue.forEach(t)},s.prototype.getElements=function(){return this._queue},s.prototype.getElementPriority=function(t){return this._priorities[t]},s.prototype.getPriorities=function(){return this._priorities},s.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,i=this._queue.length;e<i;e++)t.push([this._queue[e],this._priorities[e]]);return t},s.prototype._init=function(t,e,i){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var s=0;s<t.length;s++)this.insert(t[s],e[s])}i&&(this._sorting=i)},s.prototype._insertAt=function(t,e,i){this._queue.length===i?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(i,0,t),this._priorities.splice(i,0,e))},t.exports&&(t.exports=s)},function(t,e,i){t.exports&&(t.exports={DBSCAN:i(3),KMEANS:i(4),OPTICS:i(5),PriorityQueue:i(0)})},function(t,e,i){"use strict";i.r(e),i.d(e,"dbscan",(function(){return r}));var s=i(1);async function r(t,e,i){const r=new s.DBSCAN;return{clusters:r.run(t,e,i),noise:r.noise}}addEventListener("message",(function(t){var i,s=t.data,r=s.type,n=s.method,o=s.id,h=s.params;"RPC"===r&&n&&((i=e[n])?Promise.resolve().then((function(){return i.apply(e,h)})):Promise.reject("No such method")).then((function(t){postMessage({type:"RPC",id:o,result:t})})).catch((function(t){var e={message:t};t.stack&&(e.message=t.message,e.stack=t.stack,e.name=t.name),postMessage({type:"RPC",id:o,error:e})}))})),postMessage({type:"RPC",method:"ready"})},function(t,e,i){function s(t,e,i,s){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,i,s)}s.prototype.run=function(t,e,i,s){this._init(t,e,i,s);for(var r=0;r<this._datasetLength;r++)if(1!==this._visited[r]){this._visited[r]=1;var n=this._regionQuery(r);if(n.length<this.minPts)this.noise.push(r);else{var o=this.clusters.length;this.clusters.push([]),this._addToCluster(r,o),this._expandCluster(o,n)}}return this.clusters},s.prototype._init=function(t,e,i,s){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),i&&(this.minPts=i),s&&(this.distance=s)},s.prototype._expandCluster=function(t,e){for(var i=0;i<e.length;i++){var s=e[i];if(1!==this._visited[s]){this._visited[s]=1;var r=this._regionQuery(s);r.length>=this.minPts&&(e=this._mergeArrays(e,r))}1!==this._assigned[s]&&this._addToCluster(s,t)}},s.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},s.prototype._regionQuery=function(t){for(var e=[],i=0;i<this._datasetLength;i++){this.distance(this.dataset[t],this.dataset[i])<this.epsilon&&e.push(i)}return e},s.prototype._mergeArrays=function(t,e){for(var i=e.length,s=0;s<i;s++){var r=e[s];t.indexOf(r)<0&&t.push(r)}return t},s.prototype._euclideanDistance=function(t,e){for(var i=0,s=Math.min(t.length,e.length);s--;)i+=(t[s]-e[s])*(t[s]-e[s]);return Math.sqrt(i)},t.exports&&(t.exports=s)},function(t,e,i){function s(t,e,i){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,i)}s.prototype.init=function(t,e,i){this.assignments=[],this.centroids=[],"undefined"!==typeof t&&(this.dataset=t),"undefined"!==typeof e&&(this.k=e),"undefined"!==typeof i&&(this.distance=i)},s.prototype.run=function(t,e){this.init(t,e);for(var i=this.dataset.length,s=0;s<this.k;s++)this.centroids[s]=this.randomCentroid();for(var r=!0;r;){r=this.assign();for(var n=0;n<this.k;n++){for(var o=new Array(p),h=0,a=0;a<p;a++)o[a]=0;for(var u=0;u<i;u++){var p=this.dataset[u].length;if(n===this.assignments[u]){for(a=0;a<p;a++)o[a]+=this.dataset[u][a];h++}}if(h>0){for(a=0;a<p;a++)o[a]/=h;this.centroids[n]=o}else this.centroids[n]=this.randomCentroid(),r=!0}}return this.getClusters()},s.prototype.randomCentroid=function(){var t,e,i=this.dataset.length-1;do{e=Math.round(Math.random()*i),t=this.dataset[e]}while(this.centroids.indexOf(t)>=0);return t},s.prototype.assign=function(){for(var t,e=!1,i=this.dataset.length,s=0;s<i;s++)(t=this.argmin(this.dataset[s],this.centroids,this.distance))!=this.assignments[s]&&(this.assignments[s]=t,e=!0);return e},s.prototype.getClusters=function(){for(var t,e=new Array(this.k),i=0;i<this.assignments.length;i++)"undefined"===typeof e[t=this.assignments[i]]&&(e[t]=[]),e[t].push(i);return e},s.prototype.argmin=function(t,e,i){for(var s,r=Number.MAX_VALUE,n=0,o=e.length,h=0;h<o;h++)(s=i(t,e[h]))<r&&(r=s,n=h);return n},s.prototype.distance=function(t,e){for(var i=0,s=Math.min(t.length,e.length);s--;){var r=t[s]-e[s];i+=r*r}return Math.sqrt(i)},t.exports&&(t.exports=s)},function(t,e,i){if(t.exports)var s=i(0);function r(t,e,i,s){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,i,s)}r.prototype.run=function(t,e,i,r){this._init(t,e,i,r);for(var n=0,o=this.dataset.length;n<o;n++)if(1!==this._processed[n]){this._processed[n]=1,this.clusters.push([n]);var h=this.clusters.length-1;this._orderedList.push(n);var a=new s(null,null,"asc"),u=this._regionQuery(n);void 0!==this._distanceToCore(n)&&(this._updateQueue(n,u,a),this._expandCluster(h,a))}return this.clusters},r.prototype.getReachabilityPlot=function(){for(var t=[],e=0,i=this._orderedList.length;e<i;e++){var s=this._orderedList[e],r=this._reachability[s];t.push([s,r])}return t},r.prototype._init=function(t,e,i,s){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),i&&(this.minPts=i),s&&(this.distance=s)},r.prototype._updateQueue=function(t,e,i){var s=this;this._coreDistance=this._distanceToCore(t),e.forEach((function(e){if(void 0===s._processed[e]){var r=s.distance(s.dataset[t],s.dataset[e]),n=Math.max(s._coreDistance,r);void 0===s._reachability[e]?(s._reachability[e]=n,i.insert(e,n)):n<s._reachability[e]&&(s._reachability[e]=n,i.remove(e),i.insert(e,n))}}))},r.prototype._expandCluster=function(t,e){for(var i=e.getElements(),s=0,r=i.length;s<r;s++){var n=i[s];if(void 0===this._processed[n]){var o=this._regionQuery(n);this._processed[n]=1,this.clusters[t].push(n),this._orderedList.push(n),void 0!==this._distanceToCore(n)&&(this._updateQueue(n,o,e),this._expandCluster(t,e))}}},r.prototype._distanceToCore=function(t){for(var e=this.epsilon,i=0;i<e;i++){if(this._regionQuery(t,i).length>=this.minPts)return i}},r.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var i=[],s=0,r=this.dataset.length;s<r;s++)this.distance(this.dataset[t],this.dataset[s])<e&&i.push(s);return i},r.prototype._euclideanDistance=function(t,e){for(var i=0,s=Math.min(t.length,e.length);s--;)i+=(t[s]-e[s])*(t[s]-e[s]);return Math.sqrt(i)},t.exports&&(t.exports=r)}]);
//# sourceMappingURL=0122b5b0cedbbdb80a18.worker.js.map